<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budines Artesanales - Trini & Guada</title>
    <style>
        :root{
            --bg-gradient: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            --card-bg: rgba(255,255,255,0.95);
            --muted: #7f8c8d;
            --primary: #3498db;
            --accent: #27ae60;
            --shadow: 0 8px 32px rgba(0,0,0,0.08);
            --radius: 14px;
        }

        *{box-sizing:border-box;margin:0;padding:0}
        html,body{height:100%}
        body{
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-gradient);
            color:#333;
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
            min-height:100vh;
        }

        .container{
            max-width:1200px;
            margin:0 auto;
            padding:clamp(12px,2.5vw,28px);
        }

        .header{text-align:center;margin-bottom:28px;animation:fadeInDown 0.8s}
        .header h1{font-size:clamp(1.6rem,3.2vw,2.6rem);color:#2c3e50;font-weight:300;margin-bottom:8px}
        .header p{color:var(--muted);font-size:clamp(.9rem,1.6vw,1.1rem)}

        /* Layout */
        .main-content{
            display:grid;
            grid-template-columns: 1fr 360px;
            gap:32px;
            align-items:start;
        }

        /* Cards */
        .form-section, .preview-section{
            background:var(--card-bg);
            border-radius:var(--radius);
            padding:20px;
            box-shadow:var(--shadow);
            border:1px solid rgba(255,255,255,0.4);
        }

        .form-group{margin-bottom:22px}
        .form-group h3{color:#2c3e50;margin-bottom:12px;font-size:1.05rem}

        .input-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
        .input-field{
            width:100%;padding:12px 14px;border:2px solid #ecf0f1;border-radius:12px;font-size:1rem;background:#fff;outline:none;transition:all .2s
        }
        .input-field:focus{border-color:var(--primary);box-shadow:0 0 0 4px rgba(52,152,219,0.08);transform:translateY(-1px)}

        .options-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
        .option-card{
            background:white;border:2px solid #ecf0f1;border-radius:12px;padding:14px;text-align:center;cursor:pointer;transition:all .25s;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:92px
        }
        .option-card:hover{transform:translateY(-4px);box-shadow:0 8px 18px rgba(0,0,0,0.06)}
        .option-card.selected{border-color:var(--primary);background:linear-gradient(135deg,var(--primary),#2980b9);color:#fff;transform:scale(1.03)}
        .option-icon{font-size:1.6rem;margin-bottom:6px}
        .option-name{font-size:0.95rem;font-weight:500}

        .size-options{display:flex;gap:12px;flex-wrap:wrap;justify-content:flex-start}
        .size-option{background:white;border:2px solid #ecf0f1;border-radius:50%;width:72px;height:72px;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer}
        .size-option.selected{border-color:var(--primary);background:linear-gradient(135deg,var(--primary),#2980b9);color:#fff}

        /* Preview */
        .preview-title{text-align:center;color:#2c3e50;font-size:1.25rem;margin-bottom:12px}
        .budin-preview{background:#f8f9fa;border-radius:12px;padding:18px;text-align:center;min-height:180px;display:flex;flex-direction:column;align-items:center;justify-content:center}

        .budin-base{
            width:clamp(90px,18vw,140px);height:clamp(60px,12vw,100px);border-radius:10px;display:flex;align-items:center;justify-content:center;margin-bottom:12px;transition:all .45s
        }

        .ingredients-display{display:flex;flex-wrap:wrap;justify-content:center;gap:8px;margin-top:10px}
        .ingredient-item{display:flex;align-items:center;background:rgba(52,152,219,0.08);border-radius:20px;padding:6px 10px;font-size:0.82rem;color:#2980b9}

        .order-summary{margin-top:14px;padding:14px;background:#ffffff;border-radius:10px}
        .price-display{text-align:center;font-size:1.5rem;color:var(--accent);font-weight:700;margin:12px 0}
        .order-btn{width:100%;background:linear-gradient(135deg,var(--accent),#2ecc71);color:#fff;border:none;padding:12px;border-radius:12px;font-size:1.02rem;cursor:pointer}
        .order-btn:disabled{background:#bdc3c7;cursor:not-allowed}

        .cvu-container{background:#f8f9fa;border:2px dashed var(--primary);border-radius:12px;padding:12px;text-align:center;margin-top:10px}
        .cvu-number{font-family:monospace;font-weight:700;padding:8px 12px;border-radius:8px;display:inline-block;cursor:pointer;color:#2980b9}

        /* Cooking animation overlay - keep full-screen on desktop but adapt on mobile */
        .cooking-animation{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.72);display:none;align-items:center;justify-content:center;z-index:1200}
        .cooking-content{background:white;border-radius:14px;padding:26px;text-align:center;max-width:420px;width:90%}
        .oven-icon{font-size:3.5rem;margin-bottom:12px}

        /* helpers */
        .shake{animation:shake .5s}

        /* Animations */
        @keyframes fadeInDown{from{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:none}}
        @keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-6px)}75%{transform:translateX(6px)}}

        /* RESPONSIVE ADJUSTMENTS */
        @media (max-width:1100px){
            .main-content{grid-template-columns:1fr 320px;gap:20px}
            .option-card{min-height:84px}
        }

        @media (max-width:900px){
            .main-content{grid-template-columns:1fr;}
            .preview-section{order:2}
            .form-section{order:1}
            .preview-section{position:static;top:auto}
            .option-card{min-height:80px}
            .options-grid{grid-template-columns:repeat(2,1fr)}
            .input-grid{grid-template-columns:1fr}
        }

        @media (max-width:600px){
            .options-grid{grid-template-columns:1fr}
            .size-options{justify-content:center}
            .size-option{width:64px;height:64px}
            .budin-base{width:clamp(72px,32vw,110px);height:clamp(52px,20vw,80px)}
            .header h1{font-size:1.6rem}
            .preview-title{font-size:1.05rem}
            .ingredient-item{font-size:0.78rem}
        }

        /* Small touch target improvements */
        @media (pointer:coarse){
            .option-card,.size-option{padding:16px}
        }

    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üßÅ Budines Artesanales - Trini & Guada</h1>
            <p>Crea tu bud√≠n perfecto con ingredientes frescos y naturales</p>
        </div>

        <div class="main-content">
            <div class="form-section">
                <div class="form-group">
                    <h3>üë§ Datos del cliente</h3>
                    <div class="input-grid" style="margin-bottom:10px;">
                        <input type="text" id="firstName" placeholder="Nombre" class="input-field" required>
                        <input type="text" id="lastName" placeholder="Apellido" class="input-field" required>
                    </div>
                </div>

                <div class="form-group">
                    <h3>üéÇ Elige tu sabor base</h3>
                    <div class="options-grid" id="flavors"></div>
                </div>

                <div class="form-group">
                    <h3>‚ú® Agregados extras</h3>
                    <div class="options-grid" id="extras"></div>
                </div>

                <div class="form-group">
                    <h3>üåü Super extras premium</h3>
                    <div class="options-grid" id="superExtras"></div>
                </div>

                <div class="form-group">
                    <h3>üìè Tama√±o del molde</h3>
                    <div class="size-options" id="sizes"></div>
                </div>
            </div>

            <div class="preview-section">
                <h3 class="preview-title">Vista previa de tu bud√≠n</h3>
                <div class="budin-preview">
                    <div class="budin-base" id="budinBase"><span style="font-size:2.6rem">üßÅ</span></div>
                    <div class="ingredients-display" id="ingredientsDisplay"></div>
                </div>

                <div class="order-summary">
                    <div id="orderDetails"><p style="text-align:center;color:var(--muted);">Completa tus datos y selecciona los ingredientes para ver el resumen</p></div>
                    <div class="price-display" id="priceDisplay">$0</div>

                    <div class="cvu-container">
                        <div class="cvu-label" style="font-weight:700;color:#2c3e50;margin-bottom:6px;font-size:0.95rem">üí≥ CVU para transferencia:</div>
                        <div class="cvu-number" id="cvuNumber" onclick="copyCVU()">0000003100065308425641</div>
                        <div class="copy-message" style="font-size:0.82rem;color:var(--muted);margin-top:6px">Haz clic para copiar</div>
                    </div>

                    <button class="order-btn" id="orderBtn" disabled onclick="processOrder()">Realizar Pedido</button>
                </div>
            </div>
        </div>
    </div>

    <div class="cooking-animation" id="cookingAnimation">
        <div class="cooking-content">
            <div class="oven-icon">üî•</div>
            <div class="cooking-text">¬°Tu bud√≠n se est√° cocinando!</div>
            <div class="progress-bar" style="width:100%;height:8px;background:#ecf0f1;border-radius:6px;overflow:hidden;margin:12px 0">
                <div class="progress-fill" id="progressFill" style="height:100%;background:linear-gradient(90deg,var(--accent),#2ecc71);width:0%"></div>
            </div>
            <p id="cookingStatus">Preparando ingredientes...</p>
        </div>
    </div>

    <script>
        // Lista de sabores
        const flavors = [
            { id: 'chocolate', name: 'Chocolate', icon: 'üç´', color: '#8B4513' },
            { id: 'vainilla', name: 'Vainilla', icon: 'üåü', color: '#FFF8DC' },
            { id: 'banana', name: 'Banana', icon: 'üçå', color: '#FFE135' },
            { id: 'limon', name: 'Lim√≥n', icon: 'üçã', color: '#FFF700' },
            { id: 'naranja', name: 'Naranja', icon: 'üçä', color: '#FFA500' },
            { id: 'coco', name: 'Coco', icon: 'ü••', color: '#F5F5DC' },
            { id: 'mandarina', name: 'Mandarina', icon: 'üçä', color: '#FF8C00' },
            { id: 'marmolado', name: 'Marmolado', icon: 'üé®', color: 'linear-gradient(45deg, #8B4513, #FFF8DC)' },
            { id: 'carrot', name: 'Zanahoria', icon: 'ü•ï', color: '#FF6347' }
        ];

        // Precio base de cualquier sabor
        const BASE_FLAVOR_PRICE = 3800;

        // Lista de extras con precios actualizados
        const extras = [
            { id: 'arandanos', name: 'Ar√°ndanos', icon: 'ü´ê', price: 1600 },
            { id: 'chips-chocolate', name: 'Chips de Chocolate', icon: 'üç´', price: 1400 },
            { id: 'dulce-leche', name: 'Dulce de Leche', icon: 'üçØ', price: 670 },
            { id: 'coco-rallado', name: 'Coco', icon: 'ü••', price: 1550 },
            { id: 'nueces', name: 'Nueces', icon: 'ü•ú', price: 1000 },
            { id: 'almendras', name: 'Almendras', icon: 'üå∞', price: 1350 },
            { id: 'mix-semillas', name: 'Mix Semillas', icon: 'üå±', price: 980 },
            { id: 'pasas', name: 'Pasas de Uva', icon: 'üçá', price: 450 },
            { id: 'frutos-rojos', name: 'Frutos Rojos', icon: 'üçì', price: 1800 }
        ];

        // Lista de super extras con precios actualizados
        const superExtras = [
            { id: 'bano-chocolate', name: 'Ba√±o de Chocolate', icon: 'üç´', price: 2750 },
            { id: 'glaseado', name: 'Glaseado', icon: '‚ú®', price: 2750 }
        ];

        // Tama√±os (se mantienen como dato descriptivo)
        const sizes = [
            { id: '15cm', name: '15cm', price: 800 },
            { id: '20cm', name: '20cm', price: 1200 },
            { id: '25cm', name: '25cm', price: 1600 },
            { id: '30cm', name: '30cm', price: 2000 }
        ];

        let selection = { firstName:'', lastName:'', flavor:null, extras:[], superExtras:[], size:null };

        function initApp(){ renderFlavors(); renderExtras(); renderSuperExtras(); renderSizes(); setupInputListeners(); }

        function setupInputListeners(){
            document.getElementById('firstName').addEventListener('input', function(){ selection.firstName = this.value; updatePreview(); });
            document.getElementById('lastName').addEventListener('input', function(){ selection.lastName = this.value; updatePreview(); });
        }

        function copyCVU(){
            const cvuText = '0000003100065308425641';
            navigator.clipboard.writeText(cvuText).then(function(){
                const cvuElement = document.getElementById('cvuNumber');
                const originalBg = cvuElement.style.background;
                cvuElement.style.background = '#2ecc71';
                cvuElement.style.color = 'white';
                setTimeout(()=>{ cvuElement.style.background = originalBg; cvuElement.style.color = '#2980b9'; },800);
                const copyMessage = document.querySelector('.copy-message');
                const originalText = copyMessage.textContent;
                copyMessage.textContent = '¬°Copiado al portapapeles! ‚úÖ';
                copyMessage.style.color = '#2ecc71';
                setTimeout(()=>{ copyMessage.textContent = originalText; copyMessage.style.color = 'var(--muted)'; },2000);
            }).catch(()=>{ alert('CVU: 0000003100065308425641'); });
        }

        function renderFlavors(){ document.getElementById('flavors').innerHTML = flavors.map(flavor=>`<div class="option-card" onclick="selectFlavor('${flavor.id}')" id="flavor-${flavor.id}"><span class="option-icon">${flavor.icon}</span><div class="option-name">${flavor.name}</div></div>`).join(''); }
        function renderExtras(){ document.getElementById('extras').innerHTML = extras.map(extra=>`<div class="option-card" onclick="toggleExtra('${extra.id}')" id="extra-${extra.id}"><span class="option-icon">${extra.icon}</span><div class="option-name">${extra.name}</div><div style="font-size:0.8rem;color:var(--muted);">+$${extra.price}</div></div>`).join(''); }
        function renderSuperExtras(){ document.getElementById('superExtras').innerHTML = superExtras.map(se=>`<div class="option-card" onclick="toggleSuperExtra('${se.id}')" id="superExtra-${se.id}"><span class="option-icon">${se.icon}</span><div class="option-name">${se.name}</div><div style="font-size:0.8rem;color:var(--muted);">+$${se.price}</div></div>`).join(''); }
        function renderSizes(){ document.getElementById('sizes').innerHTML = sizes.map(s=>`<div class="size-option" onclick="selectSize('${s.id}')" id="size-${s.id}"><div style="font-weight:700">${s.name}</div><div style="font-size:0.7rem">$${s.price}</div></div>`).join(''); }

        function selectFlavor(flavorId){ document.querySelectorAll('#flavors .option-card').forEach(card=>card.classList.remove('selected')); document.getElementById(`flavor-${flavorId}`).classList.add('selected'); selection.flavor = flavorId; updatePreview(); }
        function toggleExtra(extraId){ const card = document.getElementById(`extra-${extraId}`); const idx = selection.extras.indexOf(extraId); if(idx>-1){ selection.extras.splice(idx,1); card.classList.remove('selected'); }else{ selection.extras.push(extraId); card.classList.add('selected'); } updatePreview(); }
        function toggleSuperExtra(superExtraId){ const card = document.getElementById(`superExtra-${superExtraId}`); const idx = selection.superExtras.indexOf(superExtraId); if(idx>-1){ selection.superExtras.splice(idx,1); card.classList.remove('selected'); }else{ selection.superExtras.push(superExtraId); card.classList.add('selected'); } updatePreview(); }
        function selectSize(sizeId){ document.querySelectorAll('#sizes .size-option').forEach(card=>card.classList.remove('selected')); document.getElementById(`size-${sizeId}`).classList.add('selected'); selection.size = sizeId; updatePreview(); }

        function updatePreview() {
            const budinBase = document.getElementById('budinBase');
            const ingredientsDisplay = document.getElementById('ingredientsDisplay');
            const orderDetails = document.getElementById('orderDetails');
            const priceDisplay = document.getElementById('priceDisplay');
            const orderBtn = document.getElementById('orderBtn');

            if(selection.flavor){
                const flavor = flavors.find(f=>f.id===selection.flavor);
                if(flavor.color.includes('gradient')) budinBase.style.background = flavor.color;
                else budinBase.style.backgroundColor = flavor.color;
                budinBase.innerHTML = `<span style="font-size:2.6rem">${flavor.icon}</span>`;
            }

            let ingredientsHTML = '';
            selection.extras.forEach(extraId=>{
                const extra = extras.find(e=>e.id===extraId);
                ingredientsHTML += `<div class="ingredient-item"><span style="margin-right:6px;color:#27ae60;font-weight:700">+</span><span>${extra.icon} ${extra.name}</span></div>`;
            });
            selection.superExtras.forEach(seId=>{
                const se = superExtras.find(s=>s.id===seId);
                ingredientsHTML += `<div class="ingredient-item"><span style="margin-right:6px;color:#27ae60;font-weight:700">+</span><span>${se.icon} ${se.name}</span></div>`;
            });
            ingredientsDisplay.innerHTML = ingredientsHTML;

            // C√°lculo del precio
            let totalPrice = 0;
            if (selection.flavor) {
                totalPrice += BASE_FLAVOR_PRICE;
            }
            selection.extras.forEach(extraId=>{
                const extra = extras.find(e=>e.id===extraId);
                totalPrice += extra.price;
            });
            selection.superExtras.forEach(seId=>{
                const se = superExtras.find(s=>s.id===seId);
                totalPrice += se.price;
            });

            // Mostrar resumen
            if(selection.firstName && selection.lastName && selection.flavor && selection.size){
                const flavor = flavors.find(f=>f.id===selection.flavor);
                const size = sizes.find(s=>s.id===selection.size);
                let detailsHTML = `<p><strong>Cliente:</strong> ${selection.firstName} ${selection.lastName}</p><p><strong>Sabor:</strong> ${flavor.name}</p><p><strong>Tama√±o:</strong> ${size.name}</p>`;
                if(selection.extras.length>0) detailsHTML += `<p><strong>Extras:</strong> ${selection.extras.map(id=>extras.find(e=>e.id===id).name).join(', ')}</p>`;
                if(selection.superExtras.length>0) detailsHTML += `<p><strong>Premium:</strong> ${selection.superExtras.map(id=>superExtras.find(se=>se.id===id).name).join(', ')}</p>`;
                orderDetails.innerHTML = detailsHTML;
                orderBtn.disabled = false;
            } else {
                let missingData = [];
                if(!selection.firstName || !selection.lastName) missingData.push('nombre completo');
                if(!selection.flavor) missingData.push('sabor');
                if(!selection.size) missingData.push('tama√±o');
                orderDetails.innerHTML = `<p style="text-align:center;color:var(--muted)">Completa: ${missingData.join(', ')}</p>`;
                orderBtn.disabled = true;
            }

            priceDisplay.textContent = `$${totalPrice}`;
        }

        // El resto de funciones de processOrder y resetForm se mantienen igual a tu archivo original
        // ...
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
